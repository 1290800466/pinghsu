var instantclick,InstantClick=instantclick=function(t,e,n){function r(t){var e=t.indexOf("#");return e==-1?t:t.substr(0,e)}function i(t){for(;t&&"A"!=t.nodeName;)t=t.parentNode;return t}function o(t){do{if(!t.hasAttribute)break;if(t.hasAttribute("data-instant"))return!1;if(t.hasAttribute("data-no-instant"))return!0}while(t=t.parentNode);return!1}function a(t){var n=e.protocol+"//"+e.host;return!(t.target||t.hasAttribute("download")||0!=t.href.indexOf(n+"/")||t.href.indexOf("#")>-1&&r(t.href)==Y||o(t))}function l(t){for(var e=Array.prototype.slice.call(arguments,1),n=!1,r=0;r<lt[t].length;r++)if("receive"==t){var i=lt[t][r].apply(window,e);i&&("body"in i&&(e[1]=i.body),"title"in i&&(e[2]=i.title),n=i)}else lt[t][r].apply(window,e);return n}function f(i,o,a,f){if(c(),t.documentElement.replaceChild(o,t.body),t.title=i,a){v("remove"),a!=e.href&&(history.pushState(null,null,a),n.indexOf(" CriOS/")>-1&&(t.title==i?t.title=i+String.fromCharCode(160):t.title=i));var d=a.indexOf("#"),h=d>-1&&t.getElementById(a.substr(d+1)),m=0;if(h)for(;h.offsetParent;)m+=h.offsetTop,h=h.offsetParent;"requestAnimationFrame"in window?requestAnimationFrame(function(){scrollTo(0,m)}):scrollTo(0,m),u(),Y=r(a),Y in dt&&(dt[Y]=[]),ft[Y]={},g(function(t){return!t.hasAttribute("data-instant-track")}),l("change",!1)}else scrollTo(0,f),X.abort(),s(),g(function(t){return t.hasAttribute("data-instant-restore")}),p(),l("restore")}function s(){nt=!1,rt=!1}function d(t){return t.replace(/<noscript[\s\S]+?<\/noscript>/gi,"")}function c(){for(var t=0;t<st.length;t++)"object"==typeof st[t]&&"abort"in st[t]&&(st[t].instantclickAbort=!0,st[t].abort());st=[]}function u(){for(var t in ft[Y]){var e=ft[Y][t];window.clearTimeout(e.realId),e.delayLeft=e.delay-+new Date+e.timestamp}}function p(){for(var t in ft[Y])if("delayLeft"in ft[Y][t]){for(var e=[ft[Y][t].callback,ft[Y][t].delayLeft],n=0;n<ft[Y][t].params.length;n++)e.push(ft[Y][t].params[n]);y(e,ft[Y][t].isRepeating,ft[Y][t].delay),delete ft[Y][t]}}function h(){X.abort(),s()}function v(t){if(Y in dt)for(var e=0;e<dt[Y].length;e++)window[t+"EventListener"].apply(window,dt[Y][e])}function g(e){var n,r,i,o,a,l=t.body.getElementsByTagName("script"),f=[];for(a=0;a<l.length;a++)f.push(l[a]);for(a=0;a<f.length;a++)if((n=f[a])&&e(n)){r=t.createElement("script");for(var s=0;s<n.attributes.length;s++)r.setAttribute(n.attributes[s].name,n.attributes[s].value);r.textContent=n.textContent,i=n.parentNode,o=n.nextSibling,i.removeChild(n),i.insertBefore(r,o)}}function m(){for(var e,n,r=t.querySelectorAll("[data-instant-track]"),i=0;i<r.length;i++)e=r[i],n=e.getAttribute("href")||e.getAttribute("src")||e.textContent,ot.push(n)}function y(t,e,n){var r=t[0],i=t[1],o=[].slice.call(t,2),a=+new Date;V++;var l,f=V;l=e?function(e){r(e),delete ft[Y][f],t[0]=r,t[1]=i,y(t,!0)}:function(t){r(t),delete ft[Y][f]},t[0]=l,void 0!=n&&(a+=i-n,i=n);var s=window.setTimeout.apply(window,t);return ft[Y][f]={realId:s,timestamp:a,callback:r,delay:i,params:o,isRepeating:e},-f}function b(t){var e=i(t.target);e&&a(e)&&T(e.href)}function w(t){if(!(G>+new Date-500||+new Date-et<100)){var e=i(t.target);e&&e!=i(t.relatedTarget)&&a(e)&&(e.addEventListener("mouseout",A),rt||(K=e.href,j=q(T,at)))}}function E(t){G=+new Date;var e=i(t.target);e&&a(e)&&(W&&(M(W),W=!1),e.addEventListener("touchend",L),e.addEventListener("touchcancel",L),T(e.href))}function x(){t.addEventListener("click",k)}function k(e){if(t.removeEventListener("click",k),W&&(M(W),W=!1),!e.defaultPrevented){var n=i(e.target);n&&a(n)&&(0!=e.button||e.metaKey||e.ctrlKey||(e.preventDefault(),C(n.href)))}}function A(t){if(i(t.target)!=i(t.relatedTarget))return j?(M(j),void(j=!1)):void(nt&&!rt&&(X.abort(),s()))}function L(t){nt&&!rt&&(W=q(h,500))}function P(){if(2==X.readyState){var n=X.getResponseHeader("Content-Type");n&&/^text\/html/i.test(n)||(z=!0)}if(!(X.readyState<4)){if(0==X.status)return it=!0,void(rt&&(l("exit",$,"network error"),e.href=$));if(z)return void(rt&&(l("exit",$,"non-html content-type"),e.href=$));var i=t.implementation.createHTMLDocument("");i.documentElement.innerHTML=d(X.responseText),_=i.title,tt=i.body;var o=l("receive",$,tt,_);o&&("body"in o&&(tt=o.body),"title"in o&&(_=o.title));var a=r($);Z[a]={body:tt,title:_,scrollPosition:a in Z?Z[a].scrollPosition:0};var f,s,c=i.querySelectorAll("[data-instant-track]");if(c.length!=ot.length)J=!0;else for(var u=0;u<c.length;u++)f=c[u],s=f.getAttribute("href")||f.getAttribute("src")||f.textContent,ot.indexOf(s)==-1&&(J=!0);rt&&(rt=!1,C($))}}function S(){var t=r(e.href);if(t!=Y){if(rt&&(s(),X.abort()),!(t in Z))return l("exit",e.href,"not in history"),void(t==e.href?e.href=e.href:e.reload());Z[Y].scrollPosition=pageYOffset,u(),v("remove"),Y=t,f(Z[t].title,Z[t].body,!1,Z[t].scrollPosition),v("add")}}function T(t){j&&(M(j),j=!1),t||(t=K),nt&&(t==$||rt)||(nt=!0,rt=!1,$=t,tt=!1,z=!1,it=!1,J=!1,l("preload"),X.open("GET",t),X.timeout=9e4,X.send())}function C(t){return et=+new Date,j||!nt?j&&$&&$!=t?(l("exit",t,"click occured while preloading planned"),void(e.href=t)):(T(t),l("wait"),void(rt=!0)):rt?(l("exit",t,"clicked on a link while waiting for another page to display"),void(e.href=t)):z?(l("exit",$,"non-html content-type"),void(e.href=$)):it?(l("exit",$,"network error"),void(e.href=$)):J?(l("exit",$,"different assets"),void(e.href=$)):tt?(Z[Y].scrollPosition=pageYOffset,s(),void f(_,tt,$)):(l("wait"),void(rt=!0))}function O(n){if(!ut)return void l("change",!0);U||(U=!0,"mousedown"==n?Q=!0:"number"==typeof n&&(at=n),Y=r(e.href),ft[Y]={},Z[Y]={body:t.body,title:t.title,scrollPosition:pageYOffset},"loading"==t.readyState?t.addEventListener("DOMContentLoaded",m):m(),X=new XMLHttpRequest,X.addEventListener("readystatechange",P),t.addEventListener("touchstart",E,!0),Q?t.addEventListener("mousedown",b,!0):t.addEventListener("mouseover",w,!0),t.addEventListener("click",x,!0),addEventListener("popstate",S))}function D(t,e){lt[t].push(e),"change"==t&&e(!et)}function q(){return y(arguments,!1)}function I(){return y(arguments,!0)}function M(t){t=-t;for(var e in ft)t in ft[e]&&(window.clearTimeout(ft[e][t].realId),delete ft[e][t])}function N(t){st.push(t)}function B(){Y in dt||(dt[Y]=[]),dt[Y].push(arguments),addEventListener.apply(window,arguments)}function F(){if(Y in dt)t:for(var t=0;t<dt[Y].length;t++)if(arguments.length==dt[Y][t].length){for(var e=0;e<dt[Y][t].length;e++)if(arguments[e]!=dt[Y][t][e])continue t;dt[Y].splice(t,1)}}function H(e,r,i){if(!(r in ct)&&(ct[r]={},t.addEventListener(r,function(t){var e=t.target;for(t.originalStopPropagation=t.stopPropagation,t.stopPropagation=function(){this.isPropagationStopped=!0,this.originalStopPropagation()};e&&1==e.nodeType;){for(var n in ct[r])if(e.matches(n)){for(var i=0;i<ct[r][n].length;i++)ct[r][n][i].call(e,t);if(t.isPropagationStopped)return;break}e=e.parentNode}},!1),"click"==r&&/iP(?:hone|ad|od)/.test(n))){var o=t.createElement("style");o.setAttribute("instantclick-mobile-safari-cursor",""),o.textContent="body { cursor: pointer !important; }",t.head.appendChild(o)}e in ct[r]||(ct[r][e]=[]),R(e,r,i),ct[r][e].push(i)}function R(t,e,n){var r=ct[e][t].indexOf(n);r>-1&&ct[e][t].splice(r,1)}var Y,K,j,G,U,W,X,z,J,Q,V=0,Z={},$=!1,_=!1,tt=!1,et=0,nt=!1,rt=!1,it=!1,ot=[],at=65,lt={preload:[],receive:[],wait:[],change:[],restore:[],exit:[]},ft={},st=[],dt={},ct={};Element.prototype.matches||(Element.prototype.matches=Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector||function(e){for(var n=t.querySelectorAll(e),r=0;r<n.length;r++)if(n[r]==this)return!0;return!1});var ut=!1;if("pushState"in history&&"file:"!=e.protocol){ut=!0;var pt=n.indexOf("Android ");if(pt>-1){var ht=parseFloat(n.substr(pt+"Android ".length));if(ht<4.4&&(ut=!1,ht>=4))for(var vt=[/ Chrome\//,/ UCBrowser\//,/ Firefox\//,/ Windows Phone /],gt=0;gt<vt.length;gt++)if(vt[gt].test(n)){ut=!0;break}}}return{supported:ut,init:O,on:D,setTimeout:q,setInterval:I,clearTimeout:M,xhr:N,addPageEvent:B,removePageEvent:F,addEvent:H,removeEvent:R}}(document,location,navigator.userAgent);